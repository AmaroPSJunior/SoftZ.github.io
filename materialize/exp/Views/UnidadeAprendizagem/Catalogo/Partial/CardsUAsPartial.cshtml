@model IEnumerable<SLCONSTRUCT.UI.WEB.ViewModels.CatalogoGridVModel>

@{
    int qtdresgistros = ViewBag.qtdresgistros ?? 0;
    int paginaatual = ViewBag.paginaatual ?? 0;
    int qtdpaginas = ViewBag.qtdpaginas ?? 0;
    bool seanterior = ViewBag.seanterior ?? false;
    bool seproximo = ViewBag.seproximo ?? false;
}

@Html.Hidden("qtdresgistros", qtdresgistros)
@Html.Hidden("paginaatual", paginaatual)
@Html.Hidden("qtdpaginas", qtdpaginas)
@Html.Hidden("seanterior", seanterior)
@Html.Hidden("seproximo", seproximo)

<div id="modal-visualiza-aluno">
    <div id="iframe-visualiza-aluno"></div>
    <div id="modal-visAluno-footer">
        <button class="btn" id="fechar-visualizacao-aluno" type="button">Fechar Visualização de Aluno</button>
    </div>
</div>
<div class="row bloco-conteudo-padrao">
    <div class="col s12">
        <p style="color:#202528; font-size:1.1rem;font-weight:500"><i class="fas fa-search"></i> Resultados</p>
    </div>

    @foreach (var item in Model)
    {
        <div class="col s12 m6">
            <div class="info-liberada @(item.uafinalizada ? "ok" : "nok")">
                <span>@(item.uafinalizada ? "UA FINALIZADA" : "UA NÃO FINALIZADA")</span> 
                @if (item.uafinalizada)
                {
                    <div class="visualizar_comoAluno tooltipped" data-codunidadeaprendizagem="@item.codunidadeaprendizagem" data-position="left" data-tooltip="Visualizar como aluno">
                        <i class="far fa-eye"></i>
                    </div>
                }
            </div>
            <div class="card horizontal">
                <div class="card-image">
                    <img src="@item.imagemcapa">
                </div>
                <div class="card-stacked">
                    <div class="card-content scrap">
                        <i class="fas fa-trash-alt" data-codunidadeaprendizagem="@item.codunidadeaprendizagem" title="Excluir"></i>
                        <p class="card-titulo"><a href="@Url.Action("Cadastro", "UnidadeAprendizagem", new { codcurso = item.CODIGOCURSO, coddisciplina = item.CODIGODISCIPLINA, item.codunidadeaprendizagem, disciplina = item.DISCIPLINA })">@item.titulo</a></p>
                        <p class="card-curso">@item.CURSO</p>
                        <p class="card-disciplina">@item.DISCIPLINA</p>
                    </div>
                    <div class="card-tabs">
                        <ul class="tabs tabs-fixed-width">
                            <li class="tab"><a class="active" href="@string.Format("#hab{0}", item.codunidadeaprendizagem)">Habilidade</a></li>
                            <li class="tab"><a href="@string.Format("#desc{0}", item.codunidadeaprendizagem)">Descritor</a></li>
                            <li class="tab"><a href="@string.Format("#tur{0}", item.codunidadeaprendizagem)">Liberado</a></li>
                        </ul>
                    </div>
                    <div class="card-content grey lighten-4">
                        <div class="card-texto" id="@string.Format("hab{0}", item.codunidadeaprendizagem)">
                            @foreach (var itemhab in item.habilidades)
                            {
                            <p>&bull; @itemhab.habilidade;</p>
                            }
                        </div>
                        <div class="card-texto" id="@string.Format("desc{0}", item.codunidadeaprendizagem)">
                            @foreach (var itemdesc in item.descritores)
                            {
                            <p>&bull; @itemdesc.descritor;</p>
                            }
                        </div>
                        <div class="card-texto" id="@string.Format("tur{0}", item.codunidadeaprendizagem)">

                        </div>
                    </div>
                </div>
            </div>
        </div>
    }

</div>

<div class="row cmp-filtro-avancado no-margin right filtro-avancado ">
    <div class="col s12 pagination botoes-paginacao ">
        @if (!seanterior)
        {
            <button class="disabled btn inicio hide-on-small-only shadow"><i class="fas fa-angle-double-left black-text" aria-hidden="true"></i></button>
            <button class="disabled btn anterior shadow"><i class="fas fa-angle-left black-text" aria-hidden="true"></i></button>
        }
        else
        {
            <button class="btn waves-effect inicio hide-on-small-only paginacao shadow" data-pagina="1"><i class="fas fa-angle-double-left black-text" aria-hidden="true"></i></button>
            <button class="btn waves-effect paginacao anterior shadow" data-pagina="@(paginaatual - 1)"><i class="fas fa-angle-left black-text" aria-hidden="true"></i></button>
        }

        <span>@(paginaatual)/@(qtdpaginas)</span>

        @if (!seproximo)
        {
            <button class="disabled btn hide-on-small-only proximo shadow"><i class="fas fa-angle-right black-text" aria-hidden="true"></i></button>
            <button class="disabled btn hide-on-small-only shadow "><i class="fas fa-angle-double-right black-text" aria-hidden="true"></i></button>
        }
        else
        {
            <button class="btn hide-on-small-only waves-effect paginacao shadow" data-pagina="@(paginaatual + 1)"><i class="fas fa-angle-right black-text" aria-hidden="true"></i></button>
            <button class="btn hide-on-small-only waves-effect paginacao proximo shadow" data-pagina="@(qtdpaginas)"><i class="fas fa-angle-double-right black-text" aria-hidden="true"></i></button>
        }
    </div>
</div>
<script>
    $('.tooltipped').tooltip();
</script>